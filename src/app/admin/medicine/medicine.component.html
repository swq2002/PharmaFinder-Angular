<body class="admin-body">
  <div class="container-scroller">
    <!-- partial:../../partials/_navbar.html -->
    <app-navbar></app-navbar>
    <!-- partial -->
    <div class="container-fluid page-body-wrapper">
      <!-- partial:../../partials/_sidebar.html -->
      <app-sidebar></app-sidebar>



      <div class="main-panel">
        <div class="content-wrapper">
          <div class="page-header">
            <nav aria-label="breadcrumb">

            </nav>
          </div>
          <div class="row">


            <!-- table start -->


            <div class="col-lg-12 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">

                  <h4 class="card-title">Medicine Table</h4>
                  <div style="margin-top: 15px;" class="navbar-menu-wrapper d-flex align-items-stretch">
                    <!-- <button style="margin-right:250px ;" mat-raised-button color="primary" (click)="OpenCreateDialog()">Create Medicine</button> -->

                    <div class="search-field d-none d-xl-block">
                      <div class="input-group">
                        <div class="input-group-prepend bg-transparent">
                          <i class="input-group-text border-0 mdi mdi-magnify" style="height: 59px;"></i>
                        </div>
                        <mat-form-field class="example-form-field" style="flex-grow: 1;">
                          <mat-label>Sarech medicne Name</mat-label>
                          <input matInput type="text" [(ngModel)]="filterMedicineName">
                          <button *ngIf="filterMedicineName" matSuffix mat-icon-button aria-label="Clear"
                            (click)="filterMedicineName=''">
                            <mat-icon>close</mat-icon>
                          </button>
                        </mat-form-field>
                      </div>
                    </div>
                  </div>


                  <div class="table-responsive">
                    <table datatable [dtOptions]="adminService.dtOptions" class="table table-hover">
                      <thead>
                        <tr>
                          <th>medicine name</th>
                          <th>picture</th>
                          <th>medicine price</th>
                          <th>medicine type</th>
                          <th>medicine description</th>
                          <th>expiredate</th>
                          <th>active substance</th>
                          <th>quantity</th>
                          <th>pharmacy name</th>
                          <th>Action</th>


                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let obj of  adminService.medicine |filtarByMedcineName:filterMedicineName">
                          <td>{{obj.medicinename}}</td>
                          <td><img src="assets/Images/{{obj.imagename}}"></td>
                          <td>{{obj.medicineprice}}</td>
                          <td>{{obj.medicinetype}}</td>
                          <td>{{obj.medicinedescription}}</td>
                          <td>{{obj.expiredate|date:'shortDate'}}</td>
                          <td>{{obj.activesubstance}}</td>
                          <td>{{obj.quantity}}</td>
                          <td>{{obj.pharmacyname}}</td>

                          <!-- <td><a [routerLink]="['/admin/pharmacydetails', obj.pharmacyid]" >{{obj.pharmacyname}}</a></td> -->

                          <td>
                            <!-- <button style="margin:5px ;" mat-raised-button color="primary"   (click)="openUpdateDailog(obj)" >update</button> -->
                            <button mat-raised-button color="warn"
                              (click)="DeleteMedicine(obj.medicineid)">delete</button>

                          </td>

                        </tr>


                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>


            <!-- table end -->
          </div>
        </div>
        <!-- content-wrapper ends -->
        <!-- partial:../../partials/_footer.html -->



        <app-footer></app-footer>

        <!-- partial -->
      </div>
      <!-- main-panel ends -->
    </div>
    <!-- page-body-wrapper ends -->
  </div>
  <!-- container-scroller -->
  <!-- plugins:js -->





  <ng-template #CreateMedicineDailog>
    <h2 mat-dialog-title>Create Medicne</h2>
    <mat-dialog-content class="mat-typography">

      <form class="example-form" [formGroup]="CreateMedicne">
        <mat-form-field class="example-full-width">
          <mat-label>name Medicne</mat-label>
          <input type="text" matInput formControlName="medicinename">
          <mat-error *ngIf="CreateMedicne.controls['medicinename'].hasError('required')">
            medicne name is <strong>required</strong>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="example-full-width">
          <mat-label>Medicine Price</mat-label>
          <input type="number" matInput formControlName="medicineprice">
          <mat-error *ngIf="CreateMedicne.controls['medicineprice'].hasError('required')">
            medicne price is <strong>required</strong>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="example-full-width">
          <mat-label>Medicine Type</mat-label>
          <input type="text" matInput formControlName="medicinetype">
          <mat-error *ngIf="CreateMedicne.controls['medicinetype'].hasError('required')">
            medicine type is <strong>required</strong>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="example-full-width">
          <mat-label> Medicine Description</mat-label>
          <input type="text" matInput formControlName="medicinedescription">
          <mat-error *ngIf="CreateMedicne.controls['medicinedescription'].hasError('required')">
            medicine description is <strong>required</strong>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="example-full-width">
          <mat-label>Expire_Date</mat-label>
          <input type="date" matInput [matDatepicker]="pickerFrom" formControlName="expiredate">
          <mat-datepicker-toggle matSuffix [for]="pickerFrom"></mat-datepicker-toggle>
          <mat-datepicker #pickerFrom></mat-datepicker>
          <mat-error *ngIf="CreateMedicne.controls['expiredate'].hasError('required')">
            expire date is <strong>required</strong>
          </mat-error>
        </mat-form-field>


        <mat-form-field class="example-full-width">
          <mat-label> Active_Substance</mat-label>
          <input type="text" matInput formControlName="activesubstance">
          <mat-error *ngIf="CreateMedicne.controls['activesubstance'].hasError('required')">
            Active Substance is <strong>required</strong>
          </mat-error>
        </mat-form-field>
        <div>
          <input type="file" #file (change)="upleadImage(file.files)" formControlName="imagename">
        </div>
      </form>

    </mat-dialog-content>
    <mat-dialog-actions align="end">
      <button mat-button mat-dialog-close (click)="Cancel()">Cancel</button>
      <button mat-button [mat-dialog-close]="true" (click)="Create()" mat-raised-button color="primary"
        [disabled]="!CreateMedicne.valid" cdkFocusInitial>Create</button>
    </mat-dialog-actions>
  </ng-template>



  <ng-template #callDeleteDailog>
    <h1 class="mat-h1">Delete Account</h1>
    <p class="mat-body-1">Are you sure you want to delete your account?</p>
    <div class="dialog-buttons">
      <button mat-button mat-dialog-close color="primary">Cancel</button>
      <button mat-button mat-dialog-close color="warn" [mat-dialog-close]="'yes'">Delete</button>
    </div>

  </ng-template>



  <ng-template #updateMedicineDailog>
    <h2 mat-dialog-title>update Medicne</h2>
    <mat-dialog-content class="mat-typography">

      <form class="example-form" [formGroup]="UpdateMedicne">
        <mat-form-field class="example-full-width">
          <mat-label> Medicne name</mat-label>
          <input type="text" matInput formControlName="medicinename" [(ngModel)]="pData.medicinename">
          <mat-error *ngIf="UpdateMedicne.controls['medicinename'].hasError('required')">
            medicne name is <strong>required</strong>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="example-full-width">
          <mat-label>Medicine Price</mat-label>
          <input type="number" matInput formControlName="medicineprice" [(ngModel)]="pData.medicineprice">
          <mat-error *ngIf="UpdateMedicne.controls['medicineprice'].hasError('required')">
            medicine price is <strong>required</strong>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="example-full-width">
          <mat-label>Medicine Type</mat-label>
          <input type="text" matInput formControlName="medicinetype" [(ngModel)]="pData.medicinetype">
          <mat-error *ngIf="UpdateMedicne.controls['medicinetype'].hasError('required')">
            medicine type is <strong>required</strong>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="example-full-width">
          <mat-label> Medicine Description</mat-label>
          <input type="text" matInput formControlName="medicinedescription" [(ngModel)]="pData.medicinedescription">
          <mat-error *ngIf="UpdateMedicne.controls['medicinedescription'].hasError('required')">
            medicine description is <strong>required</strong>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="example-full-width">
          <mat-label>Expire_Date</mat-label>
          <input type="date" matInput formControlName="expiredate" [matDatepicker]="pickerFrom"
            [(ngModel)]="pData.expiredate">
          <mat-datepicker-toggle matSuffix [for]="pickerFrom"></mat-datepicker-toggle>
          <mat-datepicker #pickerFrom></mat-datepicker>

          <mat-error *ngIf="UpdateMedicne.controls['expiredate'].hasError('required')">
            expire date is <strong>required</strong>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="example-full-width">
          <mat-label> Active_Substance</mat-label>
          <input type="text" matInput formControlName="activesubstance" [(ngModel)]="pData.activesubstance">
          <mat-error *ngIf="UpdateMedicne.controls['activesubstance'].hasError('required')">
            Active Substance is <strong>required</strong>
          </mat-error>
        </mat-form-field>
        <div>
          <input type="file" #file (change)="upleadImage(file.files)" formControlName="imagename"
            [(ngModel)]="pData.imagename">
        </div>


      </form>

    </mat-dialog-content>
    <mat-dialog-actions align="end">
      <button mat-button mat-dialog-close (click)="Cancel()">Cancel</button>
      <button mat-button [mat-dialog-close]="true" (click)="updated()" mat-raised-button color="primary"
        [disabled]="!UpdateMedicne.valid" cdkFocusInitial>update</button>
    </mat-dialog-actions>
  </ng-template>






</body>